"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3237],{5281:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Q});var r=n(79),l=n(9841),a=n(1035),s=n(6472);const o="main_iUjq",c="heroBanner_qdFl",i="features_cAfv",u="title_GqtP",m="subtitle_RlPM",p="buttons_AeoN",d="scene_DH5P",E="heroContent_mKPX",f="featureStep_wfSU",h="featureStepReverse_BopD",y="featureStepInfo_zxuZ",g="featureStepCode_KwCm";var v=n(6178),b=n(4784),N=n(2982),w=n(161),k=n(5953),S=n(7626),x=n(70),C=n(7460);const P=(0,r.createContext)();function A(e){let{children:t,...n}=e;const{nodes:l}=(0,x.L)("/models/subway-bake-transformed.glb"),a=(0,r.useMemo)((()=>({Cube:l.Cube})),[l]);return r.createElement(C.gp,(0,S.Z)({meshes:a},n),(e=>r.createElement(P.Provider,{value:e,children:t})))}function _(e){const t=(0,r.useContext)(P);return r.createElement("group",(0,S.Z)({},e,{dispose:null}),r.createElement(t.Cube,null))}x.L.preload("/models/subway-bake-transformed.glb");var Z=n(1819),R=n(2508);function D(){return r.createElement(r.Suspense,null,r.createElement(w.Xz,{camera:{position:[0,0,2]},shadows:!1},r.createElement(R.Y1,null,r.createElement(R.xC,{autoClear:!1,multisampling:0},r.createElement(R.dp,{luminanceThreshold:0,luminanceSmoothing:3,height:800}),r.createElement(L,null)),r.createElement(I,null),r.createElement("color",{attach:"background",args:[2105376]}),r.createElement(v.S,{pixelated:!0}))))}function L(){const e=(0,r.useRef)();return(0,k.A)((()=>{e.current.offset.x=Math.sin(Date.now()/5e3)/500})),r.createElement(R.V2,{ref:e,modulationOffset:.1})}function I(){return r.createElement(r.Fragment,null,r.createElement("ambientLight",{intensity:.45,color:16769202}),r.createElement("directionalLight",{position:[0,2,0],castShadow:!0,intensity:.15,color:16757504}),r.createElement(R.Ph,{enabled:!0},r.createElement(A,null,new Array(5).fill(null).map(((e,t)=>r.createElement(q,{key:t,index:t}))))),r.createElement(b.qA,{preset:"city"}),r.createElement(U,null),r.createElement(M,null))}function M(){(0,r.useRef)(null);return(0,k.A)((e=>{let{camera:t,mouse:n}=e;const r=n.x,l=n.y,a=.03*Math.sin(Date.now()/1e3);t.position.x=r/4+a,t.position.y=l/4+a,t.lookAt(0,0,0)})),null}function q(e){let{index:t}=e;const[{position:n},l]=(0,Z.q_)((()=>({position:[0,0,-8.9*t],config:{mass:5,tension:500,friction:200}})));return(0,k.A)((e=>{const n=e.clock.getElapsedTime(),r=Math.sin(n+.25*t)/(3/t),a=-8.9*t;l.start({position:[r,0,a]})})),r.createElement(Z.q.group,{position:n},r.createElement(_,null))}const B=.25,z=16774063;function U(){const e=(0,r.useRef)(null),t=(0,r.useRef)(1),n=(0,r.useRef)(null),l=(0,r.useRef)(null),a=(0,r.useRef)(null),s=(0,r.useRef)(null),o=(0,r.useRef)(B),c=(0,r.useCallback)((e=>{n.current.intensity=e,l.current.intensity=e,a.current.intensity=e,s.current.intensity=e,o.current=e}),[]);return(0,k.A)((()=>{1===t.current&&(e.current.position.z+=1,e.current.position.z>100&&(t.current=2)),2===t.current&&(e.current.position.y+=1,e.current.position.y>30&&(t.current=3)),3===t.current&&(c(o.current-.001),o.current<=0&&(t.current=4)),4===t.current&&(e.current.position.z-=1,e.current.position.z<-100&&(t.current=5)),5===t.current?(e.current.position.y-=1,e.current.position.y<0&&(t.current=6)):6===t.current&&(c(o.current+.001),o.current>=B&&(t.current=1))})),r.createElement("group",{ref:e},r.createElement("pointLight",{ref:n,position:[-8,0,0],intensity:B,color:z}),r.createElement("pointLight",{ref:l,position:[8,0,0],intensity:B,color:z}),r.createElement("pointLight",{ref:a,position:[-8,0,-10],intensity:B,color:z}),r.createElement("pointLight",{ref:s,position:[8,0,-10],intensity:B,color:z}),r.createElement(N.JO,{args:[50,10],rotation:[0,Math.PI/2,0],position:[-10,4,25]},r.createElement("meshBasicMaterial",{color:"#fe03",attach:"material"})),r.createElement(N.JO,{args:[50,10],rotation:[0,-Math.PI/2,0],position:[10,4,25]},r.createElement("meshBasicMaterial",{color:"#fe03",attach:"material"})))}var G=n(5673),K=n(3369);const O="root_UR6M",W="next_W4Xf",j="current_BUK5",F=["Scroll down!","Subway-tolerant apps","Say goodbye to writing optimistic UI","Never write an API again","Offline-only is a breeze - and sync is one step away","It's not webscale!","I learned texture baking to make this page","Surely this is the year of the PWA!"];function H(){const[e,t]=(0,r.useState)(0),n=(0,r.useCallback)((()=>{t((e=>(e+1)%F.length))}),[t]);return(0,r.useEffect)((()=>{const e=setInterval(n,1e4);return()=>clearInterval(e)}),[n]),r.createElement("div",{className:O},r.createElement("div",{key:e,className:j},F[e]),r.createElement("div",{key:e+1,className:W},F[(e+1)%F.length]))}const T="player_yigL";function X(){const e=r.useRef(null);return r.useEffect((()=>{const t=e.current;t&&(t.volume=.25)}),[]),r.createElement("div",{className:T},r.createElement("audio",{controls:!0,loop:!0,ref:e,autoPlay:!0,src:"/music/subway day.mp3"}))}function J(){const{siteConfig:e}=(0,s.Z)();return r.createElement("main",{className:o},r.createElement(X,null),r.createElement("header",{className:(0,l.Z)("hero",c)},r.createElement("div",{className:d},r.createElement(D,null)),r.createElement("div",{className:(0,l.Z)("container",E)},r.createElement("h1",{className:u},e.title),r.createElement(H,null),r.createElement("div",{className:p},r.createElement(a.Z,{className:"button button--secondary button--lg",to:"/docs/intro"},"Quick Start")))),r.createElement("section",{className:i},r.createElement("h2",{className:m},"A holistic local-first web toolkit"),r.createElement("div",{className:f},r.createElement("div",{className:y},r.createElement("h3",null,"Build a schema"),r.createElement("ul",null,r.createElement("li",null,"Define model fields, defaults, and query indexes"),r.createElement("li",null,"Schemas are TypeScript, so you can use familiar code and modules"),r.createElement("li",null,"Create migrations as your schema evolves"))),r.createElement("div",{className:g},r.createElement(G.Z,{language:"typescript",showLineNumbers:!0,title:"schema.ts"},"import {\n\tcollection,\n\tschema\n} from '@lo-fi/web';\nimport cuid from 'cuid';\n\nconst posts = collection({\n\tname: 'post',\n\tprimaryKey: 'id',\n\tfields: {\n\t\tid: {\n\t\t\ttype: 'string',\n\t\t\tdefault: cuid,\n\t\t},\n\t\ttitle: {\n\t\t\ttype: 'string',\n\t\t},\n\t\tbody: {\n\t\t\ttype: 'string',\n\t\t},\n\t\tcreatedAt: {\n\t\t\ttype: 'number',\n\t\t\tdefault: Date.now,\n\t\t},\n\t\timage: {\n\t\t\ttype: 'file',\n\t\t\tnullable: true,\n\t\t}\n\t},\n});\n\nexport default schema({\n\tversion: 1,\n\tcollections: {\n\t\tposts\n\t}\n});\n"))),r.createElement("div",{className:(0,l.Z)(f,h)},r.createElement("div",{className:y},r.createElement("h3",null,"Generate a client"),r.createElement("ul",null,r.createElement("li",null,"Generated code is type-safe to your schema"),r.createElement("li",null,"Queries and models are reactive"),r.createElement("li",null,"React hook bindings included"))),r.createElement("div",{className:g},r.createElement(G.Z,{language:"typescript",showLineNumbers:!0,title:"client.ts"},"import {\n\tClientDescriptor,\n\tcreateHooks,\n\tmigrations\n} from './generated.js';\n\nexport const clientDescriptor =\n\tnew ClientDescriptor({\n\t\tmigrations,\n\t\tnamespace: 'demo',\n\t})\n\nexport const hooks = createHooks();\n\nasync function getAllPosts() {\n\tconst client = await\n\t\tclientDescriptor.open();\n\tconst posts = await client.posts\n\t\t.findAll().resolved;\n\treturn posts;\n}\n"))),r.createElement("div",{className:f},r.createElement("div",{className:y},r.createElement("h3",null,"Store local data"),r.createElement("ul",null,r.createElement("li",null,"Store data in IndexedDB, no server or internet connection required"),r.createElement("li",null,"Undo/redo and optimistic updates out of the box"),r.createElement("li",null,"Assign files directly to model fields"))),r.createElement("div",{className:g},r.createElement(G.Z,{language:"typescript",showLineNumbers:!0,title:"app.tsx"},"import {\n\thooks,\n\tclientDescriptor\n} from './client.js';\n\nexport function App() {\n\treturn (\n\t\t<Suspense>\n\t\t\t<hooks.Provider\n\t\t\t\tvalue={clientDescriptor}>\n\t\t\t\t<Posts />\n\t\t\t</hooks.Provider>\n\t\t</Suspense>\n\t);\n}\n\nfunction Posts() {\n\tconst posts = hooks.useAllPosts();\n\treturn (\n\t\t<ul>\n\t\t\t{posts.map((post) => (\n\t\t\t\t<Post\n\t\t\t\t\tkey={post.get('id')}\n\t\t\t\t\tpost={post}\n\t\t\t\t/>\n\t\t\t))}\n\t\t</ul>\n\t);\n}\n\nfunction Post({ post }) {\n\tconst {\n\t\ttitle,\n\t\tbody,\n\t\timage\n\t} = hooks.useWatch(post);\n\n\treturn (\n\t\t<li>\n\t\t\t<input\n\t\t\t\tvalue={title}\n\t\t\t\tonChange={(e) => post.set(\n\t\t\t\t\t'title', e.target.value\n\t\t\t\t)}\n\t\t\t/>\n\t\t\t<textarea\n\t\t\t\tvalue={body}\n\t\t\t\tonChange={(e) => post.set(\n\t\t\t\t\t'body',\n\t\t\t\t\te.target.value\n\t\t\t\t)}\n\t\t\t/>\n\t\t\t<input\n\t\t\t\ttype=\"file\"\n\t\t\t\tonChange={(e) => post.set(\n\t\t\t\t\t'image',\n\t\t\t\t\te.target.files[0]\n\t\t\t\t)}\n\t\t\t/>\n\t\t\t{image &&\n\t\t\t\t<img src={image.url} />\n\t\t\t}\n\t\t</li>\n\t);\n}\n"))),r.createElement("div",{className:(0,l.Z)(f,h)},r.createElement("div",{className:(0,l.Z)(y)},r.createElement("h3",null,"Sync with a server"),r.createElement("ul",null,r.createElement("li",null,"Access data across devices"),r.createElement("li",null,"Share a library with collaborators"),r.createElement("li",null,"Peer presence data and profile info"),r.createElement("li",null,"Works realtime, pull-based, even switching dynamically"))),r.createElement("div",{className:g},r.createElement(G.Z,{language:"typescript",showLineNumbers:!0,title:"server.ts"},"import { Server } from '@lo-fi/server';\n\nconst server = new Server({\n\tdatabaseFile: 'db.sqlite',\n\ttokenSecret: 'secret',\n\tprofiles: {\n\t\tget: async (userId: string) => {\n\t\t\treturn {\n\t\t\t\tid: userId,\n\t\t\t}\n\t\t}\n\t}\n});\n\nserver.listen(3000);\n")))),r.createElement("section",{style:{marginBottom:"80px"}},r.createElement("div",{className:p},r.createElement(a.Z,{className:"button button--secondary button--lg",to:"/docs/intro"},"Get Started"))))}function Q(){return r.createElement(K.Z,null,r.createElement(J,null))}}}]);