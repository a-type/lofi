"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3237],{5281:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Q});var l=n(79),r=n(9841),a=n(1035),s=n(6472);const o="main_iUjq",c="heroBanner_qdFl",i="features_cAfv",u="title_GqtP",m="subtitle_RlPM",p="buttons_AeoN",d="scene_DH5P",f="heroContent_mKPX",E="featureStep_wfSU",h="featureStepReverse_BopD",g="featureStepInfo_zxuZ",y="featureStepCode_KwCm";var b=n(9241),v=n(4784),k=n(2982),N=n(161),w=n(5953),S=n(7626),C=n(70),x=n(7460);const A=(0,l.createContext)();function P(e){let{children:t,...n}=e;const{nodes:r}=(0,C.L)("/models/subway-bake-transformed.glb"),a=(0,l.useMemo)((()=>({Cube:r.Cube})),[r]);return l.createElement(x.gp,(0,S.Z)({meshes:a},n),(e=>l.createElement(A.Provider,{value:e,children:t})))}function _(e){const t=(0,l.useContext)(A);return l.createElement("group",(0,S.Z)({},e,{dispose:null}),l.createElement(t.Cube,null))}C.L.preload("/models/subway-bake-transformed.glb");var Z=n(1819),D=n(2508);function L(){const[e,t]=(0,l.useState)(3),n=(0,l.useCallback)((()=>t((e=>Math.min(4,e+1)))),[]),r=(0,l.useCallback)((()=>t((e=>Math.max(0,e-1)))),[]);let a=1;return 0===e?a=.25:1===e?a=.5:2===e||3===e?a=1:4===e&&(a=2),(0,l.useEffect)((()=>{console.log(e)}),[e]),l.createElement(l.Suspense,null,l.createElement(N.Xz,{camera:{position:[0,0,2]},shadows:!1,dpr:a},l.createElement(D.Y1,null,l.createElement(D.xC,{autoClear:!1,multisampling:0},4===e&&l.createElement(D.y8,{focusDistance:0,focalLength:.02,bokehScale:2,height:480}),e>2&&l.createElement(D.dp,{luminanceThreshold:0,luminanceSmoothing:3,height:800}),e>2&&l.createElement(R,null)),l.createElement(I,null),l.createElement("color",{attach:"background",args:[2105376]}),l.createElement(b.A,{onIncline:n,onDecline:r,flipflops:3,onFallback:()=>t(1)}))))}function R(){const e=(0,l.useRef)();return(0,w.A)((()=>{e.current.offset.x=Math.sin(Date.now()/5e3)/500})),l.createElement(D.V2,{ref:e,modulationOffset:.1})}function I(){return l.createElement(l.Fragment,null,l.createElement("ambientLight",{intensity:.45,color:16769202}),l.createElement("directionalLight",{position:[0,2,0],castShadow:!0,intensity:.15,color:16757504}),l.createElement(D.Ph,{enabled:!0},l.createElement(P,null,new Array(5).fill(null).map(((e,t)=>l.createElement(q,{key:t,index:t}))))),l.createElement(v.qA,{preset:"city"}),l.createElement(U,null),l.createElement(M,null))}function M(){(0,l.useRef)(null);return(0,w.A)((e=>{let{camera:t,mouse:n}=e;const l=n.x,r=n.y,a=.03*Math.sin(Date.now()/1e3);t.position.x=l/4+a,t.position.y=r/4+a,t.lookAt(0,0,0)})),null}function q(e){let{index:t}=e;const[{position:n},r]=(0,Z.q_)((()=>({position:[0,0,-8.9*t],config:{mass:5,tension:500,friction:200}})));return(0,w.A)((e=>{const n=e.clock.getElapsedTime(),l=Math.sin(n+.25*t)/(3/t),a=-8.9*t;r.start({position:[l,0,a]})})),l.createElement(Z.q.group,{position:n},l.createElement(_,null))}const B=.25,z=16774063;function U(){const e=(0,l.useRef)(null),t=(0,l.useRef)(1),n=(0,l.useRef)(null),r=(0,l.useRef)(null),a=(0,l.useRef)(null),s=(0,l.useRef)(null),o=(0,l.useRef)(B),c=(0,l.useCallback)((e=>{n.current.intensity=e,r.current.intensity=e,a.current.intensity=e,s.current.intensity=e,o.current=e}),[]);return(0,w.A)((()=>{1===t.current&&(e.current.position.z+=1,e.current.position.z>100&&(t.current=2)),2===t.current&&(e.current.position.y+=1,e.current.position.y>30&&(t.current=3)),3===t.current&&(c(o.current-.001),o.current<=0&&(t.current=4)),4===t.current&&(e.current.position.z-=1,e.current.position.z<-100&&(t.current=5)),5===t.current?(e.current.position.y-=1,e.current.position.y<0&&(t.current=6)):6===t.current&&(c(o.current+.001),o.current>=B&&(t.current=1))})),l.createElement("group",{ref:e},l.createElement("pointLight",{ref:n,position:[-8,0,0],intensity:B,color:z}),l.createElement("pointLight",{ref:r,position:[8,0,0],intensity:B,color:z}),l.createElement("pointLight",{ref:a,position:[-8,0,-10],intensity:B,color:z}),l.createElement("pointLight",{ref:s,position:[8,0,-10],intensity:B,color:z}),l.createElement(k.JO,{args:[50,10],rotation:[0,Math.PI/2,0],position:[-10,4,25]},l.createElement("meshBasicMaterial",{color:"#f9f5ba",attach:"material"})),l.createElement(k.JO,{args:[50,10],rotation:[0,-Math.PI/2,0],position:[10,4,25]},l.createElement("meshBasicMaterial",{color:"#f9f5ba",attach:"material"})))}var F=n(5673),G=n(3369);const K="root_UR6M",O="next_W4Xf",W="current_BUK5",j=["Scroll down!","Subway-tolerant apps","Say goodbye to writing optimistic UI","Never write an API again","Offline-only is a breeze - and sync is one step away","It's not webscale!","I learned texture baking to make this page","Surely this is the year of the PWA!"];function H(){const[e,t]=(0,l.useState)(0),n=(0,l.useCallback)((()=>{t((e=>(e+1)%j.length))}),[t]);return(0,l.useEffect)((()=>{const e=setInterval(n,1e4);return()=>clearInterval(e)}),[n]),l.createElement("div",{className:K},l.createElement("div",{key:e,className:W},j[e]),l.createElement("div",{key:e+1,className:O},j[(e+1)%j.length]))}const T="player_yigL";function X(){const e=l.useRef(null);return l.useEffect((()=>{const t=e.current;t&&(t.volume=.25)}),[]),l.createElement("div",{className:T},l.createElement("audio",{controls:!0,loop:!0,ref:e,autoPlay:!0,src:"/music/subway day.mp3"}))}function J(){const{siteConfig:e}=(0,s.Z)();return l.createElement("main",{className:o},l.createElement(X,null),l.createElement("header",{className:(0,r.Z)("hero",c)},l.createElement("div",{className:d},l.createElement(L,null)),l.createElement("div",{className:(0,r.Z)("container",f)},l.createElement("h1",{className:u},e.title),l.createElement(H,null),l.createElement("div",{className:p},l.createElement(a.Z,{className:"button button--secondary button--lg",to:"/docs/intro"},"Quick Start")))),l.createElement("section",{className:i},l.createElement("h2",{className:m},"A holistic local-first web toolkit"),l.createElement("div",{className:E},l.createElement("div",{className:g},l.createElement("h3",null,"Build a schema"),l.createElement("ul",null,l.createElement("li",null,"Define model fields, defaults, and query indexes"),l.createElement("li",null,"Schemas are TypeScript, so you can use familiar code and modules"),l.createElement("li",null,"Create migrations as your schema evolves"))),l.createElement("div",{className:y},l.createElement(F.Z,{language:"typescript",showLineNumbers:!0,title:"schema.ts"},"import {\n\tcollection,\n\tschema\n} from '@lo-fi/web';\nimport cuid from 'cuid';\n\nconst posts = collection({\n\tname: 'post',\n\tprimaryKey: 'id',\n\tfields: {\n\t\tid: {\n\t\t\ttype: 'string',\n\t\t\tdefault: cuid,\n\t\t},\n\t\ttitle: {\n\t\t\ttype: 'string',\n\t\t},\n\t\tbody: {\n\t\t\ttype: 'string',\n\t\t},\n\t\tcreatedAt: {\n\t\t\ttype: 'number',\n\t\t\tdefault: Date.now,\n\t\t},\n\t\timage: {\n\t\t\ttype: 'file',\n\t\t\tnullable: true,\n\t\t}\n\t},\n});\n\nexport default schema({\n\tversion: 1,\n\tcollections: {\n\t\tposts\n\t}\n});\n"))),l.createElement("div",{className:(0,r.Z)(E,h)},l.createElement("div",{className:g},l.createElement("h3",null,"Generate a client"),l.createElement("ul",null,l.createElement("li",null,"Generated code is type-safe to your schema"),l.createElement("li",null,"Queries and models are reactive"),l.createElement("li",null,"React hook bindings included"))),l.createElement("div",{className:y},l.createElement(F.Z,{language:"typescript",showLineNumbers:!0,title:"client.ts"},"import {\n\tClientDescriptor,\n\tcreateHooks,\n\tmigrations\n} from './generated.js';\n\nexport const clientDescriptor =\n\tnew ClientDescriptor({\n\t\tmigrations,\n\t\tnamespace: 'demo',\n\t})\n\nexport const hooks = createHooks();\n\nasync function getAllPosts() {\n\tconst client = await\n\t\tclientDescriptor.open();\n\tconst posts = await client.posts\n\t\t.findAll().resolved;\n\treturn posts;\n}\n"))),l.createElement("div",{className:E},l.createElement("div",{className:g},l.createElement("h3",null,"Store local data"),l.createElement("ul",null,l.createElement("li",null,"Store data in IndexedDB, no server or internet connection required"),l.createElement("li",null,"Undo/redo and optimistic updates out of the box"),l.createElement("li",null,"Assign files directly to model fields"))),l.createElement("div",{className:y},l.createElement(F.Z,{language:"typescript",showLineNumbers:!0,title:"app.tsx"},"import {\n\thooks,\n\tclientDescriptor\n} from './client.js';\n\nexport function App() {\n\treturn (\n\t\t<Suspense>\n\t\t\t<hooks.Provider\n\t\t\t\tvalue={clientDescriptor}>\n\t\t\t\t<Posts />\n\t\t\t</hooks.Provider>\n\t\t</Suspense>\n\t);\n}\n\nfunction Posts() {\n\tconst posts = hooks.useAllPosts();\n\treturn (\n\t\t<ul>\n\t\t\t{posts.map((post) => (\n\t\t\t\t<Post\n\t\t\t\t\tkey={post.get('id')}\n\t\t\t\t\tpost={post}\n\t\t\t\t/>\n\t\t\t))}\n\t\t</ul>\n\t);\n}\n\nfunction Post({ post }) {\n\tconst {\n\t\ttitle,\n\t\tbody,\n\t\timage\n\t} = hooks.useWatch(post);\n\n\treturn (\n\t\t<li>\n\t\t\t<input\n\t\t\t\tvalue={title}\n\t\t\t\tonChange={(e) => post.set(\n\t\t\t\t\t'title', e.target.value\n\t\t\t\t)}\n\t\t\t/>\n\t\t\t<textarea\n\t\t\t\tvalue={body}\n\t\t\t\tonChange={(e) => post.set(\n\t\t\t\t\t'body',\n\t\t\t\t\te.target.value\n\t\t\t\t)}\n\t\t\t/>\n\t\t\t<input\n\t\t\t\ttype=\"file\"\n\t\t\t\tonChange={(e) => post.set(\n\t\t\t\t\t'image',\n\t\t\t\t\te.target.files[0]\n\t\t\t\t)}\n\t\t\t/>\n\t\t\t{image &&\n\t\t\t\t<img src={image.url} />\n\t\t\t}\n\t\t</li>\n\t);\n}\n"))),l.createElement("div",{className:(0,r.Z)(E,h)},l.createElement("div",{className:(0,r.Z)(g)},l.createElement("h3",null,"Sync with a server"),l.createElement("ul",null,l.createElement("li",null,"Access data across devices"),l.createElement("li",null,"Share a library with collaborators"),l.createElement("li",null,"Peer presence data and profile info"),l.createElement("li",null,"Works realtime, pull-based, even switching dynamically"))),l.createElement("div",{className:y},l.createElement(F.Z,{language:"typescript",showLineNumbers:!0,title:"server.ts"},"import { Server } from '@lo-fi/server';\n\nconst server = new Server({\n\tdatabaseFile: 'db.sqlite',\n\ttokenSecret: 'secret',\n\tprofiles: {\n\t\tget: async (userId: string) => {\n\t\t\treturn {\n\t\t\t\tid: userId,\n\t\t\t}\n\t\t}\n\t}\n});\n\nserver.listen(3000);\n")))),l.createElement("section",{style:{marginBottom:"80px"}},l.createElement("div",{className:p},l.createElement(a.Z,{className:"button button--secondary button--lg",to:"/docs/intro"},"Get Started"))))}function Q(){return l.createElement(G.Z,null,l.createElement(J,null))}}}]);