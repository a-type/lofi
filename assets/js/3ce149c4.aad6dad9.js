"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7230],{8570:(e,n,t)=>{t.d(n,{Zo:()=>c,kt:()=>y});var r=t(79);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var l=r.createContext({}),p=function(e){var n=r.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):a(a({},n),e)),t},c=function(e){var n=p(e.components);return r.createElement(l.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=p(t),y=o,f=d["".concat(l,".").concat(y)]||d[y]||u[y]||i;return t?r.createElement(f,a(a({ref:n},c),{},{components:t})):r.createElement(f,a({ref:n},c))}));function y(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var i=t.length,a=new Array(i);a[0]=d;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s.mdxType="string"==typeof e?e:o,a[1]=s;for(var p=2;p<i;p++)a[p]=t[p];return r.createElement.apply(null,a)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},9895:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>p});var r=t(7626),o=(t(79),t(8570));const i={sidebar_position:4},a="Presence & Profiles",s={unversionedId:"sync/presence",id:"sync/presence",title:"Presence & Profiles",description:"Once you're syncing, presence info is available on client.sync.presence (where client is your instance of Client).",source:"@site/docs/sync/presence.md",sourceDirName:"sync",slug:"/sync/presence",permalink:"/docs/sync/presence",draft:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Connecting a Client",permalink:"/docs/sync/client"},next:{title:"Advanced: Transports",permalink:"/docs/sync/transports"}},l={},p=[{value:"Profiles",id:"profiles",level:2}],c={toc:p};function u(e){let{components:n,...t}=e;return(0,o.kt)("wrapper",(0,r.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"presence--profiles"},"Presence & Profiles"),(0,o.kt)("p",null,"Once you're syncing, presence info is available on ",(0,o.kt)("inlineCode",{parentName:"p"},"client.sync.presence")," (where ",(0,o.kt)("inlineCode",{parentName:"p"},"client")," is your instance of Client)."),(0,o.kt)("p",null,"You can get ",(0,o.kt)("inlineCode",{parentName:"p"},"presence.self"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"presence.peers"),", or ",(0,o.kt)("inlineCode",{parentName:"p"},"presence.everyone"),". You can also subscribe to change events: ",(0,o.kt)("inlineCode",{parentName:"p"},"peerChanged(userId, presence)"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"selfChanged(presence)"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"peersChanged(peers: { [userId]: presence })"),". Note that if you did not supply user information on your server and used the example code above, all peers will show up with the same exact identity! If you want to make each peer individual, you need to give them all unique user IDs. You could generate them on your server in-memory if you don't want persistent profiles."),(0,o.kt)("p",null,'Verdant distinguishes between "replica ID" (i.e. individual device) and "user ID." The intention is to allow one actual person to use multiple devices, but only have one presence which follows them between devices.'),(0,o.kt)("p",null,"To update your presence, use ",(0,o.kt)("inlineCode",{parentName:"p"},"presence.update"),"."),(0,o.kt)("h2",{id:"profiles"},"Profiles"),(0,o.kt)("p",null,"Profiles are stored and pulled from the server. A user may not edit their own profile from Verdant. It's a good place to put data you need to trust, like user role or identity."),(0,o.kt)("p",null,"When initializing sync, you must supply a ",(0,o.kt)("inlineCode",{parentName:"p"},"defaultProfile")," value. That's because presence is available immediately, before sync can connect and retrieve user profiles, so something needs to be there. You can either type your Profile data as ",(0,o.kt)("inlineCode",{parentName:"p"},"{ /* your server data*/ } | null")," and supply ",(0,o.kt)("inlineCode",{parentName:"p"},"null"),", or supply an empty value that makes sense for your data."))}u.isMDXComponent=!0}}]);